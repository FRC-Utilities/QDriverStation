language: cpp

os: linux
dist: xenial
sudo: required
compiler: gcc

before_install:
  - mkdir build
  - cd build
  - wget -q -O qt5.zip https://github.com/francescmm/ci-utils/releases/download/qt/qt5.zip;
  - unzip -qq qt5.zip;
  - export QTDIR=$PWD/qt5
  - export PATH=$QTDIR/bin:$PATH;
  - export QT_PLUGIN_PATH=$PWD/qt5/plugins;
  - sudo apt-get update -qq
  
install:
  - sudo apt-get install -qq mesa-common-dev libegl1-mesa-dev libsdl2-dev

script:
  - $QTDIR/bin/qmake CONFIG+=release PREFIX=/usr ../QDriverStation.pro
  - make -j$(nproc)

notifications:
  email: false
